<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>2Q2R Demo</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body style="margin: 200px">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery-qrcode.min.js"></script>
    <script type="text/javascript">

    function getRegistrationData (email){
        $.get("/challenge?userID=" + email, function (data) {
            console.log(data);
            if (data.error) {
                alert(data.error);
            } else {
                $("#qrcode").empty();
                $("#qrcode").qrcode({
                  text: "R " + data.challenge + " " + data.infoURL,
                  size: $("#qrcode").width(),
                  radius: 0.3
                });
            }
        }, "json");
    }

    function displayKeys (keys) {

    }

    function getKeys (email) {
        $.get("/keys/" + email, function (data) {
            if (data.error) {
                alert(error);
            } else {
                displayKeys(data);
            }
        }, "json");
    }

    $(document).ready(function () {
       $("#button-register").on("click", function () {
            getRegistrationData($("#user-email").val());
        });
       $("#button-authenticate").on("click", function () {
            getKeys($("#user-email").val());
        });
    });

      </script>

    <h1> 2Q2R Demo </h1>
    <div id="qrcode"></div>
    <input id="user-email" type="text" value="alidobra@gmail.com"/><br/>
    <div id="button-group">
        <button id="button-register">Register</button>
        <button id="button-authenticate" data-toggle="modal" data-target="#key-selection-modal">Authenticate</button>
    </div>

</body>

</html>